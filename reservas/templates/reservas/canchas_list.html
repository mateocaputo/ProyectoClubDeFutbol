{% extends "club/index.html" %}

{% block titulo %}Gesti贸n y Resumen de Canchas Deportivas{% endblock titulo %}

{% block contenido %}

<div class="container py-5">
    
    <div class="d-flex justify-content-between align-items-center mb-4 pb-2 border-bottom">
        <h1 style="color: var(--primary-color); font-weight: 700; font-size: 2.25rem;">
            Gesti贸n de Canchas | Resumen
        </h1>
        
        <div class="btn-group" role="group" aria-label="Acciones de gesti贸n">
            <a href="{% url 'cancha_create' %}" class="btn btn-lg shadow-sm text-uppercase btn-primary"
                style="color: white; letter-spacing: 0.5px;">
                <i class="bi bi-plus-circle-fill me-2"></i> Registrar Nueva Cancha
            </a>
        </div>
    </div>

    <div class="card p-3 mb-5 border-0 shadow-sm">
        <form class="d-flex" method="GET" role="search">
            <input 
                class="form-control form-control-lg me-3" 
                type="search" 
                placeholder="Buscar por tipo..." 
                aria-label="Buscar" 
                name="q" 
                value="{{ query|default:'' }}"
                style="border: 2px solid var(--primary-color);"
            >
            <button class="btn btn-lg shadow-sm text-uppercase btn-primary"
                style="color: white; letter-spacing: 0.5px;" type = "submit">
                Filtrar
            </button>
        </form>
    </div>

    {% if query %}
    <div class="alert alert-info border-start border-5" role="alert" 
          style="border-color: var(--primary-color) !important;">
        <i class="bi bi-info-circle-fill me-2"></i> 
        Visualizando resultados para el filtro: <strong>"{{ query }}"</strong>
    </div>
    {% endif %}

    <div class="table-responsive shadow-lg rounded-3 overflow-hidden">
        <table class="table table-striped table-hover align-middle">
            <thead style="background-color: var(--primary-color); color: white;">
                <tr>
                    <th scope="col" class="py-3">Nro. Cancha</th>
                    <th scope="col" class="py-3">Tipo</th>
                    <th scope="col" class="py-3">Descripci贸n</th>
                    <th scope="col" class="py-3">Fecha de Alta</th>
                </tr>
            </thead>
            <tbody>
                {% for cancha in canchas %}
                <tr>
                    <td>{{ cancha.nro_cancha }}</td>
                    <td>{{ cancha.tipo }}</td>
                    <td>{{ cancha.descripcion }}</td>
                    <td>{{ cancha.fecha_alta|date:"d/m/Y H:i" }}</td>
                    <td>
                        <a href="{% url 'cancha_detail' cancha.code %}" class="btn btn-sm btn-primary">Ver</a>
                    </td>   
                    <td>
                        <a href="{% url 'cancha_update' cancha.code %}" class="btn btn-sm btn-warning">Modificar</a>
                    </td>
                    <td>
                        <a href="{% url 'cancha_delete' cancha.code %}" class="btn btn-sm btn-danger">Eliminar</a>
                    </td>
                    
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center py-5 text-muted">
                        <i class="bi bi-x-circle-fill me-2"></i> No se encontraron canchas que coincidan con el criterio actual.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <p class="text-end text-muted small mt-3">
        * Resultados listados por el campo **Nro. Cancha** (si se especifica en la vista).
    </p>

</div>

{% endblock contenido %}