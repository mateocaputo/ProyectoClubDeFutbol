{% extends "club/index.html" %}

{% block titulo %}Gestión y Resumen del Inventario de Mobiliario{% endblock titulo %}

{% block contenido %}

<div class="container py-5">
    
    <div class="d-flex justify-content-between align-items-center mb-4 pb-2 border-bottom">
        <h1 style="color: var(--primary-color); font-weight: 700; font-size: 2.25rem;">
            Inventario de Mobiliario | Gestión
        </h1>
        
        <div class="btn-group" role="group" aria-label="Acciones de gestión">
            
            <a href="{% url 'mobiliarios_form' %}" class="btn btn-lg shadow-sm text-uppercase btn-primary"
                style="color: white; letter-spacing: 0.5px;">
                <i class="bi bi-plus-circle-fill me-2"></i> Registrar Nuevo Mobiliario
            </a>
        </div>
    </div>

    <div class="card p-3 mb-5 border-0 shadow-sm">
        <form class="d-flex" method="GET" role="search">
            <input 
                class="form-control form-control-lg me-3" 
                type="search" 
                placeholder="Buscar por nombre o marca..." 
                aria-label="Buscar" 
                name="q" 
                value="{{ query|default:'' }}"
                style="border: 2px solid var(--primary-color);"
            >
            <button class="btn btn-lg shadow-sm text-uppercase btn-primary"
                style="color: white; letter-spacing: 0.5px;" type = "submit">
                Filtrar
            </button>
        </form>
    </div>

    {% if query %}
    <div class="alert alert-info border-start border-5" role="alert" 
         style="border-color: var(--primary-color) !important;">
        <i class="bi bi-info-circle-fill me-2"></i> 
        Visualizando resultados para el filtro: <strong>"{{ query }}"</strong>
    </div>
    {% endif %}

    <div class="table-responsive shadow-lg rounded-3 overflow-hidden">
        <table class="table table-striped table-hover align-middle">
            <thead style="background-color: var(--primary-color); color: white;">
                <tr>
                    <th scope="col" class="py-3" style="width: 40%;">Nombre del Ítem</th>
                    <th scope="col" class="py-3" style="width: 15%;">Cantidad</th>
                    <th scope="col" class="py-3" style="width: 25%;">Marca</th>
                    <th scope="col" class="py-3" style="width: 25%;">Numero de Serie</th>
                </tr>
            </thead>
            <tbody>
                {% for item in mobiliario %}
                <tr>
                    <td>{{ item.nombre }}</td>
                    <td>{{ item.cantidad }}</span></td>
                    <td>{{ item.marca }}</td>
                    <td>{{ item.numero_serie }}</td>
                    <td>
                        <a href="{% url 'mobiliario_detail' item.numero_serie%}" class="btn btn-sm btn-primary">Ver</a>
                    </td>
                    <td>
                        <a href="{% url 'modificar_item' item.numero_serie %}" class="btn btn-sm btn-warning">Modificar</a>
                    </td>
                    <td>
                        <a href="{% url 'eliminar_item' item.numero_serie %}" class="btn btn-sm btn-danger">Eliminar</a>
                    </td>
                </tr>
                
                {% empty %}
                <tr>
                    <td colspan="4" class="text-center py-5 text-muted">
                        <i class="bi bi-x-circle-fill me-2"></i> No se encontraron registros de mobiliario que coincidan con el criterio actual.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <p class="text-end text-muted small mt-3">
        * Si la vista ordena, el orden se aplica al número interno o alfabético.
    </p>

</div>

{% endblock contenido %}