{% extends "club/index.html" %}

{% block titulo %}Gestión y Resumen del Plantel Profesional{% endblock titulo %}

{% block contenido %}

<div class="container py-5">
    
    <div class="d-flex justify-content-between align-items-center mb-4 pb-2 border-bottom">
        <h1 style="color: var(--primary-color); font-weight: 700; font-size: 2.25rem;">
            Plantel Profesional | Resumen
        </h1>
        
        <div class="btn-group" role="group" aria-label="Acciones de gestión">
            
            <button onclick="window.history.back()" class="btn btn-lg shadow-sm text-uppercase"
                    style="background-color: #6c757d; color: white; letter-spacing: 0.5px;">
                <i class="bi bi-arrow-left-circle-fill me-2"></i> Volver Atrás
            </button>
            
            <a href="{% url 'index' %}" class="btn btn-lg shadow-sm text-uppercase btn-primary"
                style="color: white; letter-spacing: 0.5px;">
                <i class="bi bi-house-door-fill me-2"></i> Inicio Club
            </a>
            
            <a href="{% url 'jugadores_form' %}" class="btn btn-lg shadow-sm text-uppercase btn-primary"
                style="color: white; letter-spacing: 0.5px;">
                <i class="bi bi-person-plus-fill me-2"></i> Registrar Nuevo Jugador
            </a>
        </div>
    </div>

    <div class="card p-3 mb-5 border-0 shadow-sm">
        <form class="d-flex" method="GET" role="search">
            <input 
                class="form-control form-control-lg me-3" 
                type="search" 
                placeholder="Buscar por nombre o apellido..." 
                aria-label="Buscar" 
                name="q" 
                value="{{ query|default:'' }}"
                style="border: 2px solid var(--primary-color);"
            >
            <button class="btn btn-lg shadow-sm text-uppercase btn-primary"
                style="color: white; letter-spacing: 0.5px;" type = "submit">
                Filtrar
            </button>
        </form>
    </div>

    {% if query %}
    <div class="alert alert-info border-start border-5" role="alert" 
         style="border-color: var(--primary-color) !important;">
        <i class="bi bi-info-circle-fill me-2"></i> 
        Visualizando resultados para el filtro: <strong>"{{ query }}"</strong>
    </div>
    {% endif %}

    <div class="table-responsive shadow-lg rounded-3 overflow-hidden">
        <table class="table table-striped table-hover align-middle">
            <thead style="background-color: var(--primary-color); color: white;">
                <tr>
                    <th scope="col" class="py-3">Nombre</th>
                    <th scope="col" class="py-3">Apellido</th>
                    <th scope="col" class="py-3">DNI</th>
                    <th scope="col" class="py-3">Fec. Nacimiento</th>
                    <th scope="col" class="py-3">Dorsal</th>
                    <th scope="col" class="py-3">Apodo</th>
                </tr>
            </thead>
            <tbody>
                {% for jugador in jugadores %}
                <tr>
                    <td>{{ jugador.nombre }}</td>
                    <td>{{ jugador.apellido }}</td>
                    <td>{{ jugador.dni}}</td>
                    <td>{{ jugador.fecha_nacimiento}}</td>
                    <td>{{ jugador.dorsal}}</td>
                    <td>{{ jugador.apodo}}</td>

                    <td>
                        <a href="{% url 'index' %}" class="btn btn-sm btn-warning">Modificar</a>
                    </td>
                    <td>
                        <a href="{% url 'eliminar_jugador' jugador.dni %}" class="btn btn-sm btn-danger">Eliminar</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center py-5 text-muted">
                        <i class="bi bi-x-circle-fill me-2"></i> No se encontraron registros que coincidan con el criterio actual.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
{% endif %}
    
    <p class="text-end text-muted small mt-3">
        * Resultados listados por el campo **Apellido** (Orden Descendente).
    </p>

</div>

{% endblock contenido %}